<div class="container py-4">
  <h2 class="mb-3">Blogs</h2>

  @if (loading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  }

  @if (errorMsg()) {
    <div class="mb-3 text-danger">{{ errorMsg() }}</div>
  }

  @if (blogs().length === 0 && !loading() && !errorMsg()) {
    <div class="mb-3">No blogs found.</div>
  }

  <!-- List -->
  @for (blog of blogs(); track blog.id) {
    <div class="row g-3 mb-3">
      <div class="col-12">
        <mat-card class="h-100 blog-card" (click)="viewBlogDetail(blog.id)">
          <mat-card-header>
            <mat-card-title>{{ blog.title }}</mat-card-title>
            <mat-card-subtitle>
              anonymous â€¢ {{ blog.createdAt | date:'mediumDate' }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>{{ blog.content }}</p>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  }

  <!-- Sentinel for infinite scroll (must be LAST element in container) -->
  <div
    infiniteList
    (loadMore)="loadMoreBlogs()"
    style="height: 1px;">
  </div>

  <!-- Optional: loading more indicator (if you have a signal like loadingMore()) -->
  @if (loadingMore?.()) {
    <div class="text-center py-3">
      <div class="spinner-border spinner-border-sm text-primary" role="status"></div>
    </div>
  }
</div>
